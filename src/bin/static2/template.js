(()=>{function c(){let e=document.getElementById("redactSwitch");e.checked=s(),e.onclick=()=>{document.getElementById("redactSwitch").checked?localStorage.setItem("redact","true"):localStorage.setItem("redact","false"),d()},d()}function d(){s()?document.querySelector(":root").style.setProperty("--redact","blur(8px)"):document.querySelector(":root").style.setProperty("--redact","none")}function s(){let e=localStorage.getItem("redact");if(e===null)return localStorage.setItem("redact","false"),!1;if(e==="false")return!1;if(e==="true")return!0}function u(e,t=0){for(;e.children.length>t;)e.removeChild(e.lastChild)}function m(){if(f()){let e=document.getElementById("darkModeSwitch");e.checked=!0,document.body.classList.add("dark-mode"),document.documentElement.setAttribute("data-bs-theme","dark")}else document.body.classList.remove("dark-mode"),document.documentElement.setAttribute("data-bs-theme","light");document.addEventListener("DOMContentLoaded",e=>{let t=document.getElementById("darkModeSwitch");localStorage.getItem("theme")==="dark"&&(document.body.classList.add("dark-mode"),t.checked=!0),t.addEventListener("change",()=>{t.checked?(document.body.classList.add("dark-mode"),document.documentElement.setAttribute("data-bs-theme","dark"),localStorage.setItem("theme","dark"),window.graphPalette=["#4992ff","#7cffb2","#fddd60","#ff6e76","#58d9f9","#05c091","#ff8a45","#8d48e3","#dd79ff"]):(document.body.classList.remove("dark-mode"),document.documentElement.setAttribute("data-bs-theme","light"),localStorage.setItem("theme","light"),window.graphPalette=["#d87c7c","#919e8b","#d7ab82","#6e7074","#61a0a8","#efa18d","#787464","#cc7e63","#724e58","#4b565b"]),window.graphList!==void 0&&window.graphList.forEach(n=>{n.chart.dispose(),t.checked?n.chart=echarts.init(n.dom,"dark"):n.chart=echarts.init(n.dom,"vintage"),n.chart.setOption(n.option),n.onThemeChange()})})})}function f(){let e=localStorage.getItem("theme");return e===null?window.matchMedia("(prefers-color-scheme: dark)").matches?(localStorage.setItem("theme","dark"),!0):(localStorage.setItem("theme","light"),!1):e==="dark"}function h(){$.get("/local-api/deviceCount",e=>{$("#shapedDeviceCount").text(e.shaped_devices),$("#unknownIpCount").text(e.unknown_ips)})}function b(){$("#btnLogout").on("click",()=>{let e=document.cookie.split(";");for(let t=0;t<e.length;t++){let l=e[t],n=l.indexOf("="),r=n>-1?l.substr(0,n):l;document.cookie=r+"=;expires=Thu, 01 Jan 1970 00:00:00 GMT"}window.location.reload()})}function g(){$.get("/local-api/ltsCheck",e=>{if(e.node_name!==null&&(document.title=e.node_name+" - LibreQoS Node Manager"),e.action!=="GoodToGo"){let t=document.getElementById("lnkStats");t.innerHTML='<i class="fa fa-line-chart nav-icon"></i> Statistics - Free Trial',t.classList.add("text-success"),t.href="https://stats.libreqos.io/trial1/"+encodeURI(e.node_id)}else{let t=document.getElementById("lnkStats");t.innerHTML='<i class="fa fa-line-chart nav-icon"></i> Statistics',t.href="https://stats.libreqos.io/"}})}function p(e){if(e.length>2)$.ajax({type:"POST",url:"/local-api/search",data:JSON.stringify({term:e}),contentType:"application/json",success:t=>{let l=document.getElementById("searchResults");l.style.visibility="visible";let n=document.createElement("table");n.classList.add("table","table-striped");let r=document.createElement("tbody");t.forEach(o=>{let i=document.createElement("tr"),a=document.createElement("td");o.Circuit!==void 0?a.innerHTML="<a class='nav-link' href='/circuit.html?id="+encodeURI(o.Circuit.id)+"'><i class='fa fa-user'></i> "+o.Circuit.name+"</a>":o.Device!==void 0?a.innerHTML="<a class='nav-link' href='/circuit.html?id="+encodeURI(o.Device.circuit_id)+"'><i class='fa fa-computer'></i> "+o.Device.name+"</a>":o.Site!==void 0?a.innerHTML="<a class='nav-link' href='/tree.html?parent="+o.Site.idx+"'><i class='fa fa-building'></i> "+o.Site.name+"</a>":(console.log(o),a.innerText=o),i.appendChild(a),r.appendChild(i)}),u(l),n.appendChild(r),l.appendChild(n)}});else{let t=document.getElementById("searchResults");t.style.visibility="hidden"}}function x(){$("#btnSearch").on("click",()=>{let e=$("#txtSearch").val();p(e)}),$("#txtSearch").on("keyup",()=>{let e=$("#txtSearch").val();p(e)})}function T(){let e=document.getElementById("lnkReloadLqos");e.onclick=()=>{new bootstrap.Modal(document.getElementById("reloadModal"),{focus:!0}).show(),$("#reloadLibreResult").html("<i class='fa fa-spinner fa-spin'></i> Reloading LibreQoS..."),$.get("/local-api/reloadLqos",l=>{$("#reloadLibreResult").text(l)})}}b();m();c();h();g();x();T();})();
//# sourceMappingURL=template.js.map
